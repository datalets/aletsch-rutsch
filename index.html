<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">
    <title>Aletsch 2018</title>
    <meta name="description" content="Swiss glacier visualised in 3D with A-Frame">
    <style type="text/css">
    #framely { z-index:100; width:100%; height:100%; position:fixed; }
    #loading { z-index:200; width:100%; height:100%; position:fixed;
    	background:#ecf4f7; color:#333;
    	font:bold italic 26pt serif; text-align:center; padding-top:15%; }
    .sources a { font:normal 14pt sans-serif; text-decoration:none; color:blue; }
    .sources img { height:2em; }
    #loading div { margin-top:4em; }
    </style>
	<script src="lib/zepto/zepto.min.js"></script>
	<script src="lib/zepto/zepto-fx.js"></script>
	<script src="lib/csv/asyncCsv2Array.js"></script>
	<script src="data/haiku.js"></script>
	<script src="lib/aletsch/index.js"></script>
	<script src="lib/aframe/aframe-master.min.js"></script>
	<script src="lib/terrain/aframe-terrain-model-component.min.js"></script>
	<script src="lib/curve/aframe-curve-component.min.js"></script>
	<script src="lib/alongpath/aframe-alongpath-component.min.js"></script>
	<script src="lib/particle/aframe-particle-system-component.min.js"></script>
  </head>
  <body>
  	<div id="loading">
  		<span></span>
  		<div class="sources">
				<p><small><em>Too busy? Try the</em>
					<br>.: <a href="relax.html"><b>Relax</b> edition</a> :.</small>
				</p>
	  			<a href="https://github.com/loleg/aletsch-rutsch">
	  				<img src="img/opendata_logo2.png">
	  				<img src="img/github-256-black.png"><br>
	  				Sources
	  			</a>
  		</div>
  	</div>
  	<img id="framely" src="img/frame.png">

    <a-scene
    	background="color: #ecf4f7">
    	<!-- Fog does not work, conflicts with particle shader component
    	     see: https://github.com/IdeaSpaceVR/aframe-particle-system-component/issues/26
    	fog="type: linear; color: #ecf4f7; far: 100">-->

      	<a-entity position="-25 25 17" particle-system="preset: snow; particleCount: 8000"></a-entity>

		<a-entity id="g-terrain" terrain-model='zPosition: 80;
			wireframe: true;
			texture: url(geodata/aletschgletsch-DHM-g.jpg);
			DEM: url(geodata/aletschgletsch-300.bin);
			planeWidth: 46;
			planeHeight: 46;
			segmentsWidth: 299;
			segmentsHeight: 299' scale="6 6 6">
		</a-entity>

        <a-curve id="camera-track">
		    <a-curve-point position="-40 155.6 -21"></a-curve-point>
		    <a-curve-point position="-40 55.6 -21"></a-curve-point>
		    <a-curve-point position="-40 26.6 -21"></a-curve-point>
		    <a-curve-point position="-31 25 -12"></a-curve-point>
			<a-curve-point position="-40 21 6.1"></a-curve-point>
			<a-curve-point position="-25 20 17"></a-curve-point>
			<a-curve-point position="-12 20 37"></a-curve-point>
			<a-curve-point position="-17 30 45"></a-curve-point>
			<a-curve-point position="-19 33 50"></a-curve-point>
			<a-curve-point position="-20 35 55"></a-curve-point>
		</a-curve>

<!--			position="-20 35 55"-->
		<a-entity camera id="g-camera"
			position="-43 26 -23"
			alongpath="curve: #camera-track; dur: 30000"
			universal-controls wasd-controls look-controls
			rotation="-2 225 0"
            ></a-entity>

		<a-curve id="green-track">
		    <a-curve-point position="-40 45.6 -21"></a-curve-point>
		    <a-curve-point position="-40 25.6 -21"></a-curve-point>
		    <a-curve-point position="-40 26.6 -21"></a-curve-point>
		    <a-curve-point position="-31 25 -12"></a-curve-point>
		    <a-curve-point position="-31 23 -1.6"></a-curve-point>
			<a-curve-point position="-40 21 6.1"></a-curve-point>
			<a-curve-point position="-25 20 17"></a-curve-point>
			<a-curve-point position="-12 18.5 37"></a-curve-point>
			<a-curve-point position="-20 17 55"></a-curve-point>
			<a-curve-point position="-34 15 65"></a-curve-point>
			<a-curve-point position="-45 14 68"></a-curve-point>
			<a-curve-point position="-52 13 76"></a-curve-point>
			<a-curve-point position="-55 15 82"></a-curve-point>
			<a-curve-point position="-55 0 82"></a-curve-point>
		</a-curve>
		<a-sphere id="green-ball"
			alongpath="curve: #green-track; dur: 10000; loop: true"
			position="-40 25.6 -21" color="white" radius="1.0" opacity="0.43">
			<a-animation attribute="material.color" from="green" to="white" begin="blink" dur="555"></a-animation>
		</a-sphere>

		<a-curve id="yellow-track">
			<a-curve-point position="-62 47 -17"></a-curve-point>
			<a-curve-point position="-62 25 -17"></a-curve-point>
			<a-curve-point position="-62 26 -17"></a-curve-point>
			<a-curve-point position="-56 23 -6.2"></a-curve-point>
			<a-curve-point position="-42 22 -1.4"></a-curve-point>
			<a-curve-point position="-30 21 14"></a-curve-point>
			<a-curve-point position="-12 18.5 37"></a-curve-point>
			<a-curve-point position="-20 17 55"></a-curve-point>
			<a-curve-point position="-34 15 65"></a-curve-point>
			<a-curve-point position="-45 14 68"></a-curve-point>
			<a-curve-point position="-52 13 76"></a-curve-point>
			<a-curve-point position="-55 15 82"></a-curve-point>
			<a-curve-point position="-55 0 82"></a-curve-point>
		</a-curve>
		<a-sphere id="yellow-ball"
			alongpath="curve: #yellow-track; dur: 9000; loop: true"
			position="-40 25.6 -21" color="white" radius="1.0" opacity="0.43">
			<a-animation attribute="material.color" from="yellow" to="white" begin="blink" dur="555"></a-animation>
		</a-sphere>

		<a-curve id="red-track">
			<a-curve-point position="-57.727 42.903 15.991"></a-curve-point>
			<a-curve-point position="-57.727 22.903 15.991"></a-curve-point>
			<a-curve-point position="-57.727 23.903 15.991"></a-curve-point>
			<a-curve-point position="-44.261 21.7 12.509"></a-curve-point>
			<a-curve-point position="-33.904 21 9.485"></a-curve-point>
			<a-curve-point position="-21.204 18.8 23.165" curve-point=""></a-curve-point>
			<a-curve-point position="-14.961 18.482 35.937"></a-curve-point>
			<a-curve-point position="-23.957 17.722 53.36"></a-curve-point>
			<a-curve-point position="-34 15 65"></a-curve-point>
			<a-curve-point position="-45 14 68"></a-curve-point>
			<a-curve-point position="-52 13 76"></a-curve-point>
			<a-curve-point position="-55 15 82"></a-curve-point>
			<a-curve-point position="-55 0 82"></a-curve-point>
		</a-curve>
		<a-sphere id="red-ball"
			alongpath="curve: #red-track; dur: 8000; loop: true"
			position="-40 25.6 -21" color="white" radius="1.0" opacity="0.43">
			<a-animation attribute="material.color" from="red" to="white" begin="blink" dur="555"></a-animation>
		</a-sphere>

	<!-- For editing animated spheres:
		<a-draw-curve curveref="#red-track" material="shader: line; color: red;"></a-draw-curve>
		<a-draw-curve curveref="#green-track" material="shader: line; color: green;"></a-draw-curve>
		<a-draw-curve curveref="#yellow-track" material="shader: line; color: yellow;"></a-draw-curve>
	-->

	</a-scene>
  </body>
</html>
